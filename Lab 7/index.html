<!-- Develop JavaScript program (with HTML/CSS) for:

a) Converting JSON text to JavaScript Object.
b) Convert JSON results into a date.
c) Converting From JSON To CSV and CSV to JSON.
d) Create hash from string using crypto.createHash() method. -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript JSON & Crypto Operations</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: #1e1e2f;
      color: #fff;
      margin: 0;
      padding: 20px;
    }

    h2 {
      color: #00d4ff;
      border-bottom: 2px solid #00d4ff;
      padding-bottom: 5px;
    }

    section {
      background: #2b2b3c;
      padding: 15px 20px;
      margin: 15px 0;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    textarea, input {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border-radius: 6px;
      border: none;
      font-size: 1em;
    }

    button {
      background-color: #00d4ff;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      margin: 5px 0;
    }

    button:hover {
      background-color: #00a8cc;
    }

    pre {
      background: #12121a;
      padding: 10px;
      border-radius: 6px;
      overflow-x: auto;
    }
  </style>
</head>
<body>

  <h1>JavaScript JSON & Crypto Operations</h1>

  <!-- (a) JSON Text to Object -->
  <section>
    <h2>a) Convert JSON Text → JavaScript Object</h2>
    <textarea id="jsonText" rows="4">{ "name": "Jayaditya", "age": 21, "city": "Mumbai" }</textarea>
    <button onclick="convertToObject()">Convert</button>
    <pre id="objResult"></pre>
  </section>

  <!-- (b) Convert JSON result into a Date -->
  <section>
    <h2>b) Convert JSON Result → Date</h2>
    <textarea id="jsonDate" rows="2">{ "created_at": "2025-10-27T17:00:00Z" }</textarea>
    <button onclick="convertToDate()">Convert to Date</button>
    <pre id="dateResult"></pre>
  </section>

  <!-- (c) JSON ↔ CSV Conversion -->
  <section>
    <h2>c) Convert JSON ↔ CSV</h2>
    <h4>JSON → CSV</h4>
    <textarea id="jsonCSV" rows="4">[{"name":"Alice","age":25},{"name":"Bob","age":30}]</textarea>
    <button onclick="jsonToCSV()">Convert to CSV</button>
    <pre id="csvResult"></pre>

    <h4>CSV → JSON</h4>
    <textarea id="csvText" rows="4">name,age\nAlice,25\nBob,30</textarea>
    <button onclick="csvToJSON()">Convert to JSON</button>
    <pre id="jsonResult"></pre>
  </section>

  <!-- (d) Hash from String -->
  <section>
    <h2>d) Create Hash from String</h2>
    <input type="text" id="hashInput" placeholder="Enter text to hash">
    <button onclick="createHash()">Generate SHA-256 Hash</button>
    <pre id="hashResult"></pre>
  </section>

  <script>
    // (a) Convert JSON Text to Object
    function convertToObject() {
      try {
        const text = document.getElementById('jsonText').value;
        const obj = JSON.parse(text);
        document.getElementById('objResult').textContent =
          JSON.stringify(obj, null, 2);
      } catch (err) {
        document.getElementById('objResult').textContent = 'Invalid JSON!';
      }
    }

    // (b) Convert JSON date string to Date
    function convertToDate() {
      try {
        const text = document.getElementById('jsonDate').value;
        const data = JSON.parse(text);
        const date = new Date(data.created_at);
        document.getElementById('dateResult').textContent = "Converted Date: " + date.toString();
      } catch (err) {
        document.getElementById('dateResult').textContent = 'Invalid JSON or Date format!';
      }
    }

    // (c1) JSON to CSV
    function jsonToCSV() {
      try {
        const arr = JSON.parse(document.getElementById('jsonCSV').value);
        if (!Array.isArray(arr) || arr.length === 0) throw "Invalid JSON array";
        const headers = Object.keys(arr[0]);
        const csvRows = [headers.join(",")];
        arr.forEach(obj => {
          csvRows.push(headers.map(h => obj[h]).join(","));
        });
        document.getElementById('csvResult').textContent = csvRows.join("\n");
      } catch (err) {
        document.getElementById('csvResult').textContent = "Invalid JSON!";
      }
    }

    // (c2) CSV to JSON
    function csvToJSON() {
      try {
        const text = document.getElementById('csvText').value.trim();
        const [headerLine, ...lines] = text.split("\n");
        const headers = headerLine.split(",");
        const json = lines.map(line => {
          const values = line.split(",");
          const obj = {};
          headers.forEach((h, i) => obj[h] = values[i]);
          return obj;
        });
        document.getElementById('jsonResult').textContent = JSON.stringify(json, null, 2);
      } catch (err) {
        document.getElementById('jsonResult').textContent = "Invalid CSV!";
      }
    }

    // (d) Create Hash (browser-friendly version using Web Crypto API)
    async function createHash() {
      const input = document.getElementById('hashInput').value;
      if (!input) {
        document.getElementById('hashResult').textContent = "Please enter a string!";
        return;
      }
      const encoder = new TextEncoder();
      const data = encoder.encode(input);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
      document.getElementById('hashResult').textContent = "SHA-256 Hash:\n" + hashHex;
    }
  </script>

</body>
</html>
